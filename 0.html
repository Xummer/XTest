<!DOCTYPE html>
<!-- saved from url=(0062)http://meishi.qq.com/qr/13373091173084?ticket=Kk81jzgBAACoEA5Q -->
<html lang="zh-CN">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" /> 
  <title>用safari打开Demo</title>
 </head> 
 <body> 
  <article> 
   <header></header> 
   <div id="card"> 
    <a href="javascript:void(0)" id="getLocation">getLocation test</a> 
    <br /> 
    <br />
   </div> 
   <div id='log'>
   </div>
  </article> 
  <script>
  
var readyFunc = function onBridgeReady() {
 
  var uniqueId = 1
		function log(message, data) {
			var log = document.getElementById('log')
			var el = document.createElement('div')
			el.className = 'logLine'
			el.innerHTML = uniqueId++ + '. ' + message + ':<br/>' + JSON.stringify(data)
			if (log.children.length) { log.insertBefore(el, log.children[0]) }
			else { log.appendChild(el) }
		}
		
		WebViewJavascriptBridge.init(function(message, responseCallback) {
			log('JS got a message', message)
			var data = { 'Javascript Responds':'Wee!' }
			log('JS responding with', data)
			responseCallback(data)
		})
    // 绑定关注事件
  document.querySelector('#getLocation').addEventListener('click', function(e) {
      WebViewJavascriptBridge.callHandler('getLocation', '0', function(r) {
         alert(r)
      })
  })
}
if (typeof WebViewJavascriptBridge === "undefined") {
  document.addEventListener('WebViewJavascriptBridgeReady', readyFunc, false);
} else {
  readyFunc();
}
</script> 
 </body>
</html>
